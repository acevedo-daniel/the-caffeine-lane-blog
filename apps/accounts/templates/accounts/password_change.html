{% extends "base.html" %}
{% load static %}

{% block title %}Cambiar Contraseña - The Caffeine Lane{% endblock %}

{% block header %}{% endblock %} {# Ocultar navbar #}
{% block footer %}{% endblock %} {# Ocultar footer #}

{% block content %}
<link rel="stylesheet" href="{% static 'css/accounts.css' %}">

<div class="min-h-screen bg-black flex items-center justify-center py-12 px-4 relative overflow-hidden">
    <!-- Fondo sutil (se mantiene con el color general negro) -->
    <div class="absolute inset-0 bg-gradient-to-b from-red-900/10 to-transparent pointer-events-none"></div>

    <div class="max-w-md w-full space-y-8 text-center relative z-10 bg-gray-50 p-8 rounded-lg shadow-xl"> {# Fondo claro para el contenedor del formulario #}
        <!-- Título con estilo de marca y enlace al home -->
        <a href="{% url 'home' %}" class="text-5xl font-bebas text-gray-800 tracking-wider hover:text-red-500 transition duration-300"> {# Texto oscuro #}
            THE CAFFEINE LANE
        </a>
        <p class="mt-3 text-lg text-gray-700 font-mont uppercase tracking-wide"> {# Texto oscuro #}
            Cambia tu contraseña
        </p>

        <!-- Mensajes de éxito o error -->
        {% if messages %}
            {% for message in messages %}
                <div class="p-3 rounded-lg text-sm font-mont mt-4 shadow-lg {% if message.tags == 'success' %}bg-green-100 text-green-800{% else %}bg-blue-100 text-blue-800{% endif %}"> {# Estilo de mensaje de éxito para fondo claro #}
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        {% if form.errors %}
            <div class="bg-red-100 text-red-800 p-3 rounded-lg text-sm font-mont mt-4 shadow-lg"> {# Estilo de mensaje de error para fondo claro #}
                Por favor, corrige los errores abajo.
            </div>
        {% endif %}

        <!-- Formulario -->
        <form class="mt-8 space-y-6" method="post">
            {% csrf_token %}

            <!-- Contraseña actual -->
            <div class="space-y-3">
                <label for="{{ form.old_password.id_for_label }}" class="block text-sm font-mont font-bold text-gray-700 uppercase tracking-wide"> {# Texto oscuro para label #}
                    Contraseña actual
                </label>
                <div class="relative">
                    <input type="password"
                           name="{{ form.old_password.name }}"
                           id="{{ form.old_password.id_for_label }}"
                           placeholder="Ingresa tu contraseña actual"
                           class="block w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors duration-200"> {# Estilo de input para fondo claro #}
                    {# Aquí podrías añadir el botón para mostrar/ocultar contraseña si lo deseas #}
                </div>
                {% if form.old_password.errors %}
                    <div class="text-red-500 text-xs text-left font-mont mt-1"> {# Estilo de error de campo para fondo claro #}
                        {% for error in form.old_password.errors %}{{ error }}{% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- Nueva contraseña -->
            <div class="space-y-3">
                <label for="{{ form.new_password1.id_for_label }}" class="block text-sm font-mont font-bold text-gray-700 uppercase tracking-wide"> {# Texto oscuro para label #}
                    Nueva contraseña
                </label>
                <div class="relative">
                    <input type="password"
                           name="{{ form.new_password1.name }}"
                           id="{{ form.new_password1.id_for_label }}"
                           placeholder="Ingresa tu nueva contraseña"
                           class="block w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors duration-200"> {# Estilo de input para fondo claro #}
                    {# Aquí podrías añadir el botón para mostrar/ocultar contraseña si lo deseas #}
                </div>
                {% if form.new_password1.errors %}
                    <div class="text-red-500 text-xs text-left font-mont mt-1"> {# Estilo de error de campo para fondo claro #}
                        {% for error in form.new_password1.errors %}{{ error }}{% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- Confirmar nueva contraseña -->
            <div class="space-y-3">
                <label for="{{ form.new_password2.id_for_label }}" class="block text-sm font-mont font-bold text-gray-700 uppercase tracking-wide"> {# Texto oscuro para label #}
                    Confirmar nueva contraseña
                </label>
                <div class="relative">
                    <input type="password"
                           name="{{ form.new_password2.name }}"
                           id="{{ form.new_password2.id_for_label }}"
                           placeholder="Confirma tu nueva contraseña"
                           class="block w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors duration-200"> {# Estilo de input para fondo claro #}
                    {# Aquí podrías añadir el botón para mostrar/ocultar contraseña si lo deseas #}
                </div>
                {% if form.new_password2.errors %}
                    <div class="text-red-500 text-xs text-left font-mont mt-1"> {# Estilo de error de campo para fondo claro #}
                        {% for error in form.new_password2.errors %}{{ error }}{% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- Botón de envío -->
            <div class="mt-6">
                <button type="submit"
                        class="w-full flex justify-center py-3 px-4 border border-transparent text-sm font-mont font-bold rounded-lg text-white bg-red-600 hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105"> {# Estilo de botón primario #}
                    <i class="fas fa-key mr-2"></i>
                    Cambiar Contraseña
                </button>
            </div>

            <!-- Enlace a perfil -->
            <p class="mt-6 text-sm font-mont text-gray-700"> {# Color de texto ajustado #}
                <a href="{% url 'profile' %}" class="font-bold text-red-600 hover:text-red-800 transition"> {# Color de enlace ajustado #}
                    ← Volver al perfil
                </a>
            </p>
        </form>
    </div>
</div>

{# Opcional: Si tienes una función JavaScript para mostrar/ocultar contraseña, la puedes incluir aquí o en un archivo JS separado #}
{# <script src="{% static 'js/accounts.js' %}"></script> #}
{% endblock %}
